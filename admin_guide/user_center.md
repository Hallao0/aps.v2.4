# 用户中心
## 功能简介

APS提供集中的用户管理、权限管理以及安全管理功能，使用户的生命周期管理和安全管理更加直观、易用。APS在用户中心提供的主要管理功能如下所示：

* 用户管理：在用户中心实现APS中用户的统一管理，并通过Kerberos协议认证用户。
    
    * APS通过在数据库和Kerberos中创建相同名字的用户，来配合实现用户管理。数据库用于存储用户记录、用户组与权限等用户信息；Kerberos中的用户信息则用于用户操作集群资源时的身份认证。
    
    * 当管理员在APS中创建或修改用户信息时，系统自动完成数据库和Kerberos中信息的同步更改。   

* 权限管理：使用RBAC（Role-Based Access Control）方式，即基于角色授予权限，形成权限的集合。用户通过分配一个或多个已授权的角色取得对应的权限。

    * 用户组为一批用户的集合，可对用户进行分类管理。系统中的用户至少要加入到一个组中。

    * 当用户加入已分配角色的用户组时，会自动继承用户组的权限。

* 安全管理：系统自动捕捉用户的各种操作并反馈给管理员，对于有危害的操作，管理员可以及时给予干预。
    
    * 消息中心记录在分析应用中的关键操作并通过消息的形式反馈给管理员。
    
    * 日志审计功能详细记录用户操作，帮助管理员了解系统中发生的各种事件。
    
* 标签管理：标签用于实现数据模块、分析模块的分类与管理。

在系统中，根据角色的不同，可以分为管理员和普通操作员，由于二者所具有的权限不同，因此登录系统后可查看的菜单范围不同。其中，管理员登录后系统显示用户中心下的所有菜单，而普通操作员登录后系统仅显示部分菜单，如可能仅显示“基本信息”和安全中心菜单。


## 基本信息
管理员可以在基本信息页面修改个人资料和密码。
在“用户中心”页签单击“基本信息”，系统显示基本信息编辑页面：

![](/admin_guide/fig/fig_05.jpg)

* 在“个人资料”页签下可以查看和修改如下信息：
    * 用户名：不可修改。
    * Email：格式为“登录名@主机名.域名”，例如user@zetyun.com。
    * 头像：可以选择系统提供的头像，也可以单击“点击上传”选择本地文件作为头像。
* 在“修改密码”页签下可以修改登录密码。  

## 安全中心
用户可以在安全中心进行KeyTab的管理。
KeyTab是用户进行集群资源操作的秘钥，用户在进行与集群资源相关的操作之前（例如运行一个交互探索服务）需要先获取KeyTab。
进入“安全中心”页面，可以查看KeyTab状态，当KeyTab状态正常时显示如下图所示：
![](/admin_guide/fig/fig_06.jpg)

在KetTab文件状态异常时，可以单击“获取”，在对话框中输入用户密码重新获取KeyTab，如下图所示：
![](/admin_guide/fig/fig_07.png)

## 消息中心




## 用户管理
管理员可以在用户列表页面查看和修改当前系统中的用户信息。
### 新建用户（AD域）
若APS采用AD进行鉴权，则只有通过AD鉴权且本地也存在的用户才可以登录APS。因此，对于在AD中新增的用户，需要在APS中创建同名的用户。
假设AD中新增了一个用户名为“Tom”的用户，此用户需要使用APS，则需要在APS中创建一个同名用户。
1. 选择“服务 > 用户中心 > 用户列表”。
2. 在用户列表页面单击右上角的“新建用户”按钮。
3. 在“新建用户”对话框中输入用户名“Tom”。
    ![](/admin_guide/fig/fig_08.png)
4. 单击“保存”，完成用户创建。
    此时可以在用户列表中看到该用户。

### 新建用户（非AD域）
1. 选择“服务 > 用户中心 > 用户列表”。
2. 在用户列表页面单击右上角的“新建用户”按钮。
3. 在“新建用户”对话框中输入用户名、密码、邮箱（选填）。
4. 单击“保存”，完成用户创建。

### 删除用户
1. 选择“服务 > 用户中心 > 用户列表”。
2. 在用户列表中，勾选一个或多个用户前的复选框。
3. 单击页面右侧的“删除”按钮。
4. 在确认对话框中单击“删除”按钮，可以删除选中的用户。
    ![](/admin_guide/fig/fig_09.png)

### 修改用户组
1. 选择“服务 > 用户中心 > 用户列表”。
2. 在用户列表中，单击某个用户所在行的 图标。
3. 在用户组对话框中勾选要加入组名之前的复选框。
4. 单击“保存”按钮。
    用户加入某个分组后，会继承该分组所拥有角色的权限。
    ![](/admin_guide/fig/fig_10.png)

### 修改用户资源
1. 选择“服务 > 用户中心 > 用户列表”。
2. 在用户列表中，单击某个用户所在行的 图标。
3. 在“资源管理”对话框中通过拖拽圆圈即可修改用户可使用的资源。
4. 单击“保存”按钮。
    ![](/admin_guide/fig/fig_11.png)
    
## 用户分组
用户分组是进行用户管理的单位，用户通过加入一个或多个分组来继承相应分组所拥有的权限。
系统预置部分分组，管理员也可以根据实际需求创建新的分组。

### 新建用户组
1. 在“用户分组”页面的右上角单击“新建用户组”，系统显示“新建用户组”页面。
2. 配置用户组属性。
    * 名称：请根据实际情况设置。
    * 描述：添加用户分组的创建原因、用途等信息。
    * 用户：选择将哪些用户加入该分组中。
    * 角色：选择为该分组分配哪些角色。加入该分组的用户会继承分配给该分组的角色的权限。
3. 单击“确定”，完成分组的创建。
    ![](/admin_guide/fig/fig_12.png)

### 修改分组
1. 在用户分组列表中，单击某个分组所在行的 按钮，系统显示分组编辑页面。
2. 根据实际情况修改分组的描述、用户、角色。
3. 单击“确定”按钮，完成修改。
![](/admin_guide/fig/fig_13.png)

## 用户角色
用户角色是一组权限的集合，用户角色被赋予用户分组，用户分组中的用户即可继承该用户角色所拥有的权限。
系统预置的部分用户角色，管理员也可以根据实际需求创建新的角色。
### 新建角色
1. 在“用户角色”页面的右上角单击“新建用角色”，系统显示“创建用户角色”页面。
2. 配置用户角色属性。
    * 名称：请根据实际情况设置。
    * 描述：添加用户角色的创建原因、用途等信息。
    * 分析应用权限：选择为该角色赋予哪些权限。
3. 单击“确定”，完成角色创建。
    ![](/admin_guide/fig/fig_14.png)

### 修改角色
1. 在用户角色列表中，单击某个角色所在行的 按钮，系统显示角色编辑页面。
2. 根据实际情况修改角色的描述、权限。
3. 单击“确定”按钮，完成修改。
    ![](/admin_guide/fig/fig_15.png)
    
## 删除角色
用户角色只能逐个删除，不能批量删除。
1. 在用户角色列表中，单击某个角色所在行的![](/admin_guide/fig/delete.png)按钮。
2. 在确认对话框中单击“删除”按钮。

## 日志审计
日志审计记录了用户在系统中执行的各项操作，以方便管理员可以在需要的时候了解系统中发生的各种变更。系统提供的日志审计功能如下所示：
* 基于关键字的日志检索功能。
* 基于日期范围的日志下载功能。
* 基于多种指标的排序功能。

### 查看日志
1. 打开“日志审计”页面。
2. 对日志进行排序。

    日志支持四种排序类型，分别是“序号”、“创建人”、“类型”、“创建时间”。在日志列表上方，单击排序类型后的 即可完成排序。
    ![](/admin_guide/fig/fig_16.png)

### 下载日志
1. 打开“日志审计”页面。
2. 单击页面右上角的“下载”按钮。
3. 在下载对话框中设置要下载日志的时间范围。
4. 单击“下载”按钮，开始下载。
    ![](/admin_guide/fig/fig_17.png)

### 筛选日志
1. 打开“日志审计”页面。
2. 单击页面右上角的“筛选”按钮。
3. 在下载对话框中设置筛选条件。
4. 单击“保存”按钮。
    ![](/admin_guide/fig/fig_18.png)

## 标签管理
标签用于实现数据模块、分析模块的分类与管理，例如在创建一个数据模块时可以为其指定一个标签，从而可以按功能或按应用场景等将不同的模块进行组织归类，从而在创建数据应用的时候，可以在相应的标签下快速找到对应的模块。
通过标签管理，可以新建标签以及对已有标签进行重命名。
在“标签管理”页面的右上角单击“新建标签”，在对话框中选择标签所属的模块以及设置标签名即可完成一个新标签的创建。
![](/admin_guide/fig/fig_19.png)

在标签列表中，单击![](/admin_guide/fig/rename.png)按钮可以对标签进行重命名。
